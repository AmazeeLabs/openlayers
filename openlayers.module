<?php
// $Id$

function openlayers_help($path, $arg) {
}

/*
 * Access permission stuff
 */
function openlayers_perm() {
	return array(
		'create ol_map',
		'edit own ol_map',
	);
}

function openlayers_access($op, $node, $account) {
	if ($op == 'create') {
		return user_access('create ol_map', $account);
	}

	if ($op == 'update' || $op == 'delete') {
		if (user_access('edit own ol_map', $account) && ($account->uid == $node->uid)) {
			return TRUE;
		}
	}
}

function openlayers_menu() {
	$items = array();

	$items['admin/settings/openlayers'] = array(
		'title' => 'OpenLayers',
		'description' => t('Set some defaults for OpenLayer maps.'),
		'page callback' => 'drupal_get_form',
		'page arguments' => array('openlayers_settings'),
		'access arguments' => array('access administration pages'),
		'type' => MENU_NORMAL_ITEM,
	);

	return $items;
}

/*
 * Settings page & validation
 */
function openlayers_settings() {
	$form = array();

	return system_settings_form($form);
}

function openlayers_settings_validate($form, &$form_state) {
}

/*
 * node stuff
 */

function openlayers_node_info() {
	return array(
		'ol_map' => array(
			'name' => t('Map'),
			'module' => 'openlayers',
			'description' => t('Create a map.'),
	),
	);
}

require_once('openlayers_map.inc');
